"use strict";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".catalog-item"),o=document.querySelectorAll(".catalog-item__wrapper"),c=document.querySelectorAll(".more"),n=document.querySelectorAll(".back"),l=document.querySelectorAll(".button"),a=document.querySelectorAll(".modal__close"),r=document.querySelector(".overlay"),s=document.querySelectorAll(".button-mini"),i=function(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}();window.addEventListener("scroll",(function(){this.window.scrollY>700?document.querySelector(".pageup").style.display="block":document.querySelector(".pageup").style.display="none"}));const d=tns({container:".carousel__inner",items:1,slideBy:"page",autoplay:!1,controls:!1,navPosition:"bottom",speed:800,mouseDrag:!0,responsive:{768:{nav:!0},992:{nav:!1}}}),u=tns({container:".reviews__carousel-wrap",items:1,slideBy:"page",autoplay:!1,controls:!1,navPosition:"bottom",speed:800,mouseDrag:!0,responsive:{768:{nav:!0},992:{nav:!1}}}),m=(e,t,o)=>{document.querySelector(t).addEventListener("click",(function(){e.goTo("next")})),document.querySelector(o).addEventListener("click",(function(){e.goTo("prev")}))};m(d,".next",".prev"),m(u,".reviews-next",".reviews-prev");const y=e=>{t.forEach((t=>{const o=t.dataset.content;e===o?(t.classList.add("active-item"),t.classList.add("hide")):(t.classList.remove("active-item"),t.classList.remove("hide"))}))},v=(e,t)=>{l.forEach((o=>{o.addEventListener("click",(()=>{o.dataset.modal===e&&h(t)}))}))},h=e=>{r.style.display="block",document.getElementById(e).classList.remove("modal-hide"),document.body.style.marginRight=`${i}px`,document.body.style.overflow="hidden"},p=e=>{const t=document.querySelector(e);r.style.display="none",t.classList.add("modal-hide"),document.body.style.marginRight="0px",document.body.style.overflow="auto"},f=e=>{document.getElementById(e).classList.add("modal-hide")};c.forEach(((e,t)=>{e.addEventListener("click",(function(){o.forEach(((e,o)=>{t===o&&(e.querySelector(".catalog-item__content").classList.add("catalog-item__hidden"),e.querySelector(".catalog-item__list").classList.remove("catalog-item__hidden"))}))}))})),n.forEach(((e,t)=>{e.addEventListener("click",(function(){o.forEach(((e,o)=>{t===o&&(e.querySelector(".catalog-item__content").classList.remove("catalog-item__hidden"),e.querySelector(".catalog-item__list").classList.add("catalog-item__hidden"))}))}))})),e.forEach((t=>{t.addEventListener("click",(()=>{const o=t,c=o.dataset.btn;y(c),e.forEach((e=>{e.classList.remove("active")})),o.classList.add("active")}))})),v("consultation","consultation"),v("buy","order"),a.forEach((e=>{e.addEventListener("click",(()=>{p(".modal")}))})),s.forEach(((e,t)=>{e.addEventListener("click",(()=>{const e=document.querySelector("#order .modal__descr");document.querySelectorAll(".item__subtitle").forEach(((o,c)=>{t===c&&(e.textContent=o.textContent)}))}))})),document.querySelectorAll("form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault(),(async e=>{const t=await fetch("mailer/smart.php",{method:"POST",body:e});if(!t.ok)throw new Error(`Ошибка по адресу ${url}, статус ошибки ${t.status}`);return await t.text()})(new FormData(e)).then((()=>{f("consultation"),f("order"),h("success"),e.reset()})).catch((e=>console.error(e))).finally((()=>{setTimeout((()=>{p(".modal-min")}),3e3)}))}))}))}));